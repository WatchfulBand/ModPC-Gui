<?xml version="1.0" encoding="utf-8"?>
<Page
    x:Class="ModPC_Gui.Pages.BlankPage2"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:ModPC_Gui.Pages"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- 横向布局的 InfoBar - 默认风格 -->
        <Grid x:Name="LoginStatusPanel" 
              Grid.Row="0"
              Background="{ThemeResource SystemControlBackgroundChromeMediumBrush}"
              CornerRadius="4"
              Padding="4"
              Margin="30,100,30,-100"
              Visibility="Collapsed"
              HorizontalAlignment="Stretch"
              VerticalAlignment="Top">

            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <!-- 左侧状态图标 -->
            <FontIcon x:Name="StatusIcon" 
                      Grid.Column="0"
                      Glyph="&#xE946;"
                      FontSize="16"
                      Margin="10,0,12,0"
                      VerticalAlignment="Center"/>

            <!-- 中间状态文本 -->
            <StackPanel Grid.Column="1" 
                        Orientation="Horizontal"
                        VerticalAlignment="Center"
                        Spacing="8">
                <TextBlock x:Name="StatusTitle" 
                           FontWeight="SemiBold"/>
                <TextBlock x:Name="StatusMessage"/>
            </StackPanel>

            <!-- 右侧控制区域 -->
            <StackPanel Grid.Column="2" 
                        Orientation="Horizontal"
                        HorizontalAlignment="Right"
                        VerticalAlignment="Center"
                        Spacing="8"
                        Margin="0,0,0,0">
                <ProgressRing x:Name="LoginProgressRing" 
                              Width="20"
                              Height="20"
                              IsActive="False"
                              Visibility="Collapsed"/>

                <!-- 修复：直接定义按钮样式 -->
                <Button x:Name="CloseStatusButton"
                        Background="Transparent"
                        Foreground="{ThemeResource SystemBaseMediumColor}"
                        BorderThickness="0"
                        CornerRadius="4"
                        Padding="8"
                        Width="32"
                        Height="32"
                        Margin="0,0,0,0"
                        Click="CloseStatusButton_Click">
                    <Button.Template>
                        <ControlTemplate TargetType="Button">
                            <Grid>
                                <VisualStateManager.VisualStateGroups>
                                    <VisualStateGroup x:Name="CommonStates">
                                        <VisualState x:Name="Normal"/>
                                        <VisualState x:Name="PointerOver">
                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="Background" Storyboard.TargetProperty="Opacity">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="0.1"/>
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualState>
                                        <VisualState x:Name="Pressed">
                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="Background" Storyboard.TargetProperty="Opacity">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="0.2"/>
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualState>
                                    </VisualStateGroup>
                                </VisualStateManager.VisualStateGroups>

                                <Rectangle x:Name="Background" 
                                           Fill="{TemplateBinding Foreground}" 
                                           Opacity="0"
                                           RadiusX="{TemplateBinding CornerRadius}" 
                                           RadiusY="{TemplateBinding CornerRadius}"/>

                                <FontIcon Glyph="&#xE894;"/>
                            </Grid>
                        </ControlTemplate>
                    </Button.Template>
                </Button>
            </StackPanel>
        </Grid>

        <!-- 标题区域 -->
        <TextBlock 
            Grid.Row="0"
            Text="账户管理"
            FontSize="32"
            FontWeight="Normal"
            Margin="46,33,0,0"
            HorizontalAlignment="Left"/>

        <!-- 内容区域 -->
        <Grid Grid.Row="1" Margin="46,0">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- 操作按钮 -->
            <TextBlock Text="管理您的游戏账户" FontSize="14" FontWeight="Light"/>
            <StackPanel Orientation="Horizontal" Margin="0,62,0,20">
                <AppBarButton 
                    x:Name="AddAccountButton"
                    Label="添加账号" 
                    Click="AddAccount_Click">
                    <AppBarButton.Icon>
                        <FontIcon Glyph="&#xE710;"/>
                    </AppBarButton.Icon>
                </AppBarButton>

                <AppBarButton 
                    x:Name="DeleteAccountButton"
                    Label="删除账号" 
                    Margin="0,0,0,0"
                    Click="DeleteAccount_Click">
                    <AppBarButton.Icon>
                        <FontIcon Glyph="&#xE738;"/>
                    </AppBarButton.Icon>
                </AppBarButton>

                <AppBarButton 
                    x:Name="LoginAccountButton"
                    Label="登录" 
                    Margin="0,0,0,0"
                    Click="LoginAccount_Click">
                    <AppBarButton.Icon>
                        <FontIcon Glyph="&#xE910;"/>
                    </AppBarButton.Icon>
                </AppBarButton>

                <AppBarButton 
                    x:Name="ChangeHWIDButton"
                    Label="更换HWID" 
                    Margin="0,0,0,0"
                    Click="ChangeHWID_Click">
                    <AppBarButton.Icon>
                        <FontIcon Glyph="&#xE895;"/>
                    </AppBarButton.Icon>
                </AppBarButton>
            </StackPanel>
            <TextBlock Text="账号列表:" Margin="0,144,0,6" FontWeight="SemiLight" Foreground="LightGray" FontSize="12"/>
            <!-- 账号列表 -->
            <ListView
                Grid.Row="1"
                x:Name="AccountsList"
                HorizontalAlignment="Stretch"
                VerticalAlignment="Stretch"
                SelectionMode="Single"
                SelectionChanged="AccountsList_SelectionChanged">
                <ListView.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Orientation="Horizontal" Padding="10">
                            <TextBlock Text="{Binding Name}" Width="200"/>
                            <TextBlock Text="{Binding Type}" Margin="20,0,0,0"/>
                        </StackPanel>
                    </DataTemplate>
                </ListView.ItemTemplate>
            </ListView>
        </Grid>
    </Grid>
</Page>